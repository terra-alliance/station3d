import{j as e,r as h,u as D,N as B,O as G,M as E,d as p}from"./index-4cbdb934.js";import{u as A}from"./index-6e7df2b1.js";import{u as V}from"./use-sound.esm-0ee7d755.js";import{s as d,a as F,b as Y,c as U,d as Z,u as $}from"./Hud-18aa39d0.js";import{A as H}from"./AnimatedPage-f47c5a92.js";import z from"./Button-2138d65e.js";import{s as q}from"./sound_5-21388207.js";import{H as T}from"./Html-e54f3864.js";import{T as I}from"./Terra-80089083.js";import{A as O}from"./AnimatedText-d229c4e6.js";import{L}from"./Lunc-4b03732f.js";import"./react-spring_three.modern-bac4fbb7.js";import"./Html-31a835b1.js";import"./useGLTF-b5088408.js";function J({txs:t}){const o=d.Hud.Wallet.scroll.use(),l=Math.round(o/300*1/1)*1;return e.jsx(e.Fragment,{children:t==null?void 0:t.slice(0,l+3).map((s,r)=>r>=l-2&&e.jsx(K,{tx:s,index:r,columns:1,xspacing:200,yspacing:300},r))})}function K({tx:t,index:i,columns:n,xspacing:c,yspacing:o}){var u,a;const l=A(),s=t.tx.body.messages[0];let r=s.toData()["@type"];return r=r.substring(r.lastIndexOf(".")+4).split(/(?=[A-Z])/).join(" "),r==="Begin Redelegate"&&(r="Redelegate"),e.jsxs("group",{position:[i%n*c-(n-1)*c/2,-Math.floor(i/n)*o+l.height/2-250,0],children:[e.jsx(I,{position:[0,0,0],scale:60,animate:!0}),e.jsxs(T,{position:[0,-140,0],style:{fontSize:25,lineHeight:.1},children:[e.jsxs("span",{style:{fontWeight:"bold",fontSize:30},children:[r," "]}),e.jsxs("span",{style:{fontWeight:"bold",fontSize:30},children:[s.amount&&((u=s.amount.amount)==null?void 0:u.toString())/1e6," "]}),e.jsxs("span",{style:{fontWeight:"bold",fontSize:30},children:[s.amount&&((a=s.amount.denom)==null?void 0:a.slice(1))," "]}),Q(s.option),e.jsxs("span",{children:[s.option&&"on prop"," "]}),e.jsx("span",{style:{fontWeight:"bold"},children:s.proposal_id}),e.jsxs("p",{style:{fontSize:20,lineHeight:2},children:[" ",new Date(t.timestamp).toDateString()+" "+new Date(t.timestamp).toLocaleTimeString()]})]})]})}const Q=t=>{switch(t){case"VOTE_OPTION_YES":return e.jsx("span",{style:{fontWeight:"bold",color:"green"},children:"Yes "});case"VOTE_OPTION_NO":return e.jsx("span",{style:{fontWeight:"bold",color:"red"},children:"No "});case"VOTE_OPTION_NO_WITH_VETO":return e.jsx("span",{style:{fontWeight:"bold",color:"orange"},children:"No with veto "});case"VOTE_OPTION_ABSTAIN":return e.jsx("span",{style:{fontWeight:"bold",color:"yellow"},children:"Abstain "})}},C=new B(1,32,32),W=new G(.3,.3,5),X=new E({color:"purple",transparent:!0,opacity:.1}),y=new E({roughness:.25,metalness:1,color:"purple"});function R({position:t,scale:i}){const n=h.useRef();return D((c,o)=>{n.current.rotation.z+=o*.5}),e.jsxs("group",{position:t,scale:i,children:[e.jsx("mesh",{geometry:C,material:X}),e.jsxs("group",{ref:n,children:[e.jsxs("group",{rotation:[0,0,Math.PI/3],children:[e.jsx("mesh",{position:[0,-.6,0],geometry:C,material:y,scale:.25}),e.jsx("mesh",{position:[0,.3,0],rotation:[0,0,Math.PI/2],geometry:W,material:y,scale:.25})]}),e.jsxs("group",{rotation:[0,0,-Math.PI/3],children:[e.jsx("mesh",{position:[0,-.6,0],geometry:C,material:y,scale:.25}),e.jsx("mesh",{position:[0,.3,0],rotation:[0,0,Math.PI/2],geometry:W,material:y,scale:.25})]}),e.jsxs("group",{rotation:[0,0,Math.PI/1],children:[e.jsx("mesh",{position:[0,-.6,0],geometry:C,material:y,scale:.25}),e.jsx("mesh",{position:[0,.3,0],rotation:[0,0,Math.PI/2],geometry:W,material:y,scale:.25})]})]})]})}function ee(){const t="ontouchstart"in document.documentElement?1:5,i=175,n=130,c=d.Hud.Wallet.scroll.use(),o=Math.round(c/n*t/t)*t,l=d.data.bank.balance.use(),s=Object.values((l==null?void 0:l._coins)||{});return s.sort((r,u)=>Number(u.amount)-Number(r.amount)),e.jsx(e.Fragment,{children:s==null?void 0:s.slice(0,o+30).map((r,u)=>u>=o-5&&e.jsx(te,{Component:r.denom==="uluna"?L:r.denom.slice(0,3)==="ibc"?R:I,position:[0,u*-90+250,0],currency:r.denom,coin:r,flag:r.denom.slice(1),xspacing:i,yspacing:n,index:u,columns:t},u))})}const _=["usd","twd","thb","sgd","sek","sdr","php","nok","myr","mnt","krw","jpy","inr","idr","hkd","gbp","eur","dkk","cny","chf","cad","aud"];function te({Component:t,coin:i,index:n,columns:c,xspacing:o,yspacing:l,flag:s,currency:r}){const u=A(),a=F(),m=Math.floor(i.amount/1e6*100)/100;return e.jsxs("group",{position:[n%c*o-(c-1)*o/2,-Math.floor(n/c)*l+u.height/2-250,0],children:[e.jsx(h.Suspense,{children:e.jsx(t,{position:[0,0,0],scale:30,flag:_.indexOf(s)>0?_.indexOf(s):null,animate:!0})}),e.jsxs(T,{transform:!0,distanceFactor:400,style:{width:"150px",textAlign:"left"},position:[50,-60,0],pointerEvents:"none",children:[e.jsx("span",{style:{fontSize:26},children:e.jsx("b",{children:m?e.jsx(O,{text:m.toString(),chars:"0123456789",speed:20}):e.jsx(O,{text:"0",chars:"0123456789",speed:20})})}),e.jsx("span",{style:{fontSize:20,whiteSpace:"nowrap",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",width:"90px",display:"block"},children:" "+(i.denom==="uluna"?(a==null?void 0:a.network)==="classic"?"lunc":"luna":r)})]})]})}function se(){var P,N;const t=d.data.bank.balance.use(),i=Object.values((t==null?void 0:t._coins)||{});i.sort((j,f)=>Number(f.amount)-Number(j.amount));const[n,c]=h.useState(0),[o,l]=h.useState(!1),[s,r]=h.useState(),u=Math.floor(((P=i[n])==null?void 0:P.amount)/1e6*100)/100,a=F(),[m,b]=h.useState(),x=a?re(a.network):"phoenix-1",M={chainID:x,msgs:[new p.MsgSend(a==null?void 0:a.addresses[x],a==null?void 0:a.addresses[x],new p.Coins([new p.Coin((N=i[n])==null?void 0:N.denom,2)]))]},g=Y(M),S=U(),w=Z(),v=g&&(a.network==="classic"?w&&(g*S+(m||0)*1e6*w).toFixed(0):(g*S).toFixed(0)),k={chainID:x,msgs:[new p.MsgSend(a==null?void 0:a.addresses[x],s,new p.Coins([new p.Coin(i[n].denom,m*1e6)]))]};return e.jsxs(e.Fragment,{children:[e.jsx("group",{position:[0,0,0],children:i.map((j,f)=>e.jsx(e.Fragment,{children:(f-n===0||o)&&e.jsx(ie,{Component:j.denom==="uluna"?L:j.denom.slice(0,3)==="ibc"?R:I,index:f,scroll:n,flag:j.denom.slice(1)},f)}))}),e.jsxs("mesh",{onPointerEnter:()=>l(!0),onPointerLeave:()=>l(!1),visible:!1,onWheel:j=>c(f=>Math.max(Math.min(f+Math.sign(j.deltaY),i.length-1),0)),children:[e.jsx("sphereGeometry",{args:[130,32,32]}),e.jsx("meshStandardMaterial",{transparent:!0,opacity:.4})]}),e.jsx(ne,{coinArray:i,selectedBalance:u,amount:m,setAmount:b,to:s,setTo:r,finalgas:v,msg:k,gas:g,scroll:n})]})}function ne({coinArray:t,selectedBalance:i,amount:n,setAmount:c,to:o,setTo:l,finalgas:s,msg:r,gas:u,scroll:a}){var M,g,S,w,v;const m=(((g=d.data.bank.balance.use())==null?void 0:g._coins[(M=t[a])==null?void 0:M.denom].amount.toString())/1e6||0)-(n||0),b=F(),{post:x}=$();return e.jsxs(e.Fragment,{children:[e.jsx(T,{style:{textAlign:"center",fontSize:40},position:[0,180,0],pointerEvents:"auto",children:e.jsxs("p",{style:{fontSize:40,margin:0},children:[e.jsx("b",{children:(S=t[a])!=null&&S.amount?e.jsx(O,{text:i.toString(),chars:"0123456789",speed:20}):e.jsx(O,{text:"0",chars:"0123456789",speed:20})}),e.jsx("span",{style:{marginTop:15},children:" "+(((w=t[a])==null?void 0:w.denom)==="uluna"?(b==null?void 0:b.network)==="classic"?"lunc":"luna":(v=t[a])==null?void 0:v.denom.substring(0,10))})]})}),e.jsxs(T,{style:{textAlign:"center",fontSize:40},position:[0,-260,0],pointerEvents:"auto",children:[e.jsx("span",{children:"Amount: "}),e.jsx("input",{style:{fontSize:40,fontFamily:"Alien League",fontWeight:"bold",color:d.Hud.text.color.use(),backgroundColor:m>0?"black":"red",borderRadius:"15px"},type:"number",value:n,onChange:k=>c(k.target.value),maxLength:"10",size:"15"}),e.jsxs("p",{style:{margin:"20px"},children:[e.jsx("span",{children:"To: "}),e.jsx("input",{style:{fontSize:40,fontFamily:"Alien League",fontWeight:"bold",color:d.Hud.text.color.use(),backgroundColor:m>0?"black":"red",borderRadius:"15px"},type:"text",value:o,onChange:k=>l(k.target.value),maxLength:"44",size:"20",spellcheck:"false"})]}),e.jsxs("p",{style:{margin:"20px"},children:["Fee: ",e.jsx("b",{children:e.jsx(O,{text:s?(s/1e6).toString():"Calculating...",chars:"0123456789",speed:20})})," LUNA"]})]}),e.jsx(z,{text:"Send",position:[0,-370,0],scale:35,onClick:()=>n>0&&m>0&&s&&o&&x({...r,fee:new p.Fee(u,new p.Coins([new p.Coin("uluna",s)]))})})]})}const oe=["usd","twd","thb","sgd","sek","sdr","php","nok","myr","mnt","krw","jpy","inr","idr","hkd","gbp","eur","dkk","cny","chf","cad","aud"];function ie({Component:t,flag:i,index:n,scroll:c}){const o=n-c;let l=o*110,s=o*o*40;return l=o===0?l:o>0?l+110:l-110,s=o===0?s:(o>0,s+40),e.jsx("group",{position:[l,s,0],children:e.jsx(h.Suspense,{children:e.jsx(t,{position:[0,0,0],scale:n===c?130:50,flag:oe.indexOf(i)})})})}const re=t=>{switch(t){case"mainnet":return"phoenix-1";case"testnet":return"pisco-1";case"classic":return"columbus-5";case"localterra":return"localterra"}};function we(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{name:"Wallet",children:d.Hud.Wallet.active.use()&&e.jsx(ae,{})}),e.jsx(H,{name:"Send",children:d.Hud.Send.active.use()&&e.jsx(se,{})})]})}function ae(){const t=d.data.tx.history.use(),i=A(),[n,c]=h.useState("assets"),[o]=V(q,{volume:d.volume.use()*3});return e.jsxs(e.Fragment,{children:[e.jsx(z,{text:"Assets",position:[-100,i.height/2-100,0],scale:35,onClick:()=>(o(),c("assets"))}),e.jsx(z,{text:"History",position:[100,i.height/2-100,0],scale:35,onClick:()=>(o(),c("history"))}),{assets:e.jsx(ee,{}),history:e.jsx(J,{txs:t})}[n]]})}export{we as default};
