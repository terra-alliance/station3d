import{e as w,U as y,X as M,r as c,u as E,j as e,M as A,N as R}from"./index-4cbdb934.js";import{u as k,a as x}from"./react-spring_three.modern-bac4fbb7.js";import{s as f}from"./Hud-18aa39d0.js";import{u as H}from"./use-sound.esm-0ee7d755.js";import{u as F}from"./useGLTF-b5088408.js";const v=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function S(t,n){const r=w(o=>o.gl),a=y(M,v(t)?Object.values(t):t);if(c.useLayoutEffect(()=>{n==null||n(a)},[n]),c.useEffect(()=>{"initTexture"in r&&(Array.isArray(a)?a:[a]).forEach(r.initTexture)},[r,a]),v(t)){const o=Object.keys(t),i={};return o.forEach(u=>Object.assign(i,{[u]:a[o.indexOf(u)]})),i}else return a}S.preload=t=>y.preload(M,t);S.clear=t=>y.clear(M,t);const C="/station3d/sounds/sound_13.mp3";f.Hud.Terra.material.set(new A({roughness:.25,metalness:1,color:25599}));const L=new R(1,32,32),j=["us","tw","th","sg","se","imf","ph","sj","my","mn","kr","jp","in","id","hk","sh","eu","dk","cn","ch","ca","au"];function z({position:t,material:n,scale:r,onClick:a,animate:o,flag:i,setFlag:u}){const[d,l]=c.useState(!1),{nodes:m}=F("/terra.glb"),h=k(0,{config:{mass:1,friction:15,tension:350,clamp:!0}}),p=f.Hud.Terra.material.use(),[T,P]=c.useState(0),g=k(0,{config:{mass:1,friction:15,tension:150,clamp:!1}}),[b]=H(C,{volume:f.volume.use()}),O=c.useRef();return E((s,G)=>O.current.rotation.y+=G*.5),e.jsxs("group",{position:t,children:[e.jsxs("group",{ref:O,rotation:[0,-Math.PI/2,Math.PI/2],children:[e.jsx(x.mesh,{material:n||p,position:h.to(s=>[-s,0,-s]),scale:r,geometry:m.Sphere.geometry}),e.jsx(x.mesh,{material:n||p,position:h.to(s=>[-s,0,s]),scale:r,geometry:m.Sphere1.geometry}),e.jsx(x.mesh,{material:n||p,position:h.to(s=>[s,0,-s]),scale:r,geometry:m.Sphere2.geometry}),e.jsx(x.mesh,{material:n||p,position:h.to(s=>[s,0,s]),scale:r,geometry:m.Sphere3.geometry})]}),e.jsxs(x.mesh,{geometry:L,scale:r,onPointerOver:()=>{l(!0),o&&h.start(r/3)},onPointerOut:()=>{l(!1),o&&h.start(0)},onClick:()=>{o&&h.start(r*2.5).then(()=>h.start(0)).then(()=>a&&a())},rotation:[0,0,Math.PI/2],children:[e.jsx("sphereGeometry",{args:[1,32,32]}),e.jsx("meshStandardMaterial",{transparent:!0,opacity:.5,color:d&&o?"blue":"darkblue"})]}),i!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(c.Suspense,{children:e.jsx(U,{scale:r,flag:i,flagRotation:g})}),u&&e.jsxs(e.Fragment,{children:[e.jsx(I,{position:[-Math.max(r*.3,16),-r/1.5,150],scale:Math.max(r*1.2,100),rotation:90,onClick:()=>{b(),g.start(T-2),P(s=>s-2),setTimeout(()=>{u(s=>(s-1)%j.length)},100)}}),e.jsx(I,{position:[Math.max(r*1.3,45),-r/1.5,150],scale:Math.max(r*1.2,100),rotation:270,onClick:()=>{b(),g.start(T+2),P(s=>s+2),setTimeout(()=>{u(s=>(s-1)%j.length)},100)}})]})]})]})}function U({scale:t,flag:n,flagRotation:r}){const a=S({map:"flags/"+j.at(n)+".svg"}),o=30,i=c.useRef();return E(u=>{const d=i.current.geometry.attributes.position.array;for(let l=0;l<d.length;l+=3)for(let m=0;m<d.length;m+=3){const h=m+l*(o+1),p=u.clock.elapsedTime*10;d[h+2]=Math.sin(.2*m+0*l-p)*.2*m/4}i.current.geometry.attributes.position.needsUpdate=!0}),e.jsx(x.group,{rotation:r.to(u=>[0,Math.PI*u,0]),children:e.jsxs("mesh",{ref:i,rotation:[20*(Math.PI/180),0,0],position:[t/2,-t/1.5,t],scale:t/60,children:[e.jsx("planeGeometry",{args:[75,50,o]}),e.jsx("meshBasicMaterial",{...a})]})})}function I({position:t,scale:n,rotation:r,onClick:a}){const[o,i]=c.useState(!1);return e.jsxs("group",{position:t,children:[e.jsxs("mesh",{rotation:[0,0,r*(Math.PI/180)],scale:n/50,children:[e.jsx("meshStandardMaterial",{color:16562691,roughness:.3,metalness:1}),e.jsx("coneGeometry",{args:[2.5,8]})]}),e.jsxs("mesh",{rotation:[0,0,90*(Math.PI/180)],onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),onClick:a,children:[e.jsx("meshStandardMaterial",{color:16562691,roughness:.3,metalness:1,transparent:!0,opacity:o?.15:.25}),e.jsx("capsuleGeometry",{args:[n/12,n/12]})]})]})}export{z as T,C as s};
