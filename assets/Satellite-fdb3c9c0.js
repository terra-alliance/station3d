import{V as M,aQ as R,r as j,u as A,j as x,N as G,M as P}from"./index-ef113196.js";import{u as U,a as v}from"./react-spring_three.modern-3e66679a.js";const b=new M;function i(p,y,l,h,n,e){const u=2*Math.PI*n/4,o=Math.max(e-2*n,0),t=Math.PI/4;b.copy(y),b[h]=0,b.normalize();const a=.5*u/(u+o),m=1-b.angleTo(p)/t;return Math.sign(b[l])===1?m*a:o/(u+o)+a+a*(1-m)}class V extends R{constructor(y=1,l=1,h=1,n=2,e=.1){if(n=n*2+1,e=Math.min(y/2,l/2,h/2,e),super(1,1,1,n,n,n),n===1)return;const u=this.toNonIndexed();this.index=null,this.attributes.position=u.attributes.position,this.attributes.normal=u.attributes.normal,this.attributes.uv=u.attributes.uv;const o=new M,t=new M,a=new M(y,l,h).divideScalar(2).subScalar(e),m=this.attributes.position.array,g=this.attributes.normal.array,c=this.attributes.uv.array,I=m.length/6,s=new M,z=.5/n;for(let f=0,r=0;f<m.length;f+=3,r+=2)switch(o.fromArray(m,f),t.copy(o),t.x-=Math.sign(t.x)*z,t.y-=Math.sign(t.y)*z,t.z-=Math.sign(t.z)*z,t.normalize(),m[f+0]=a.x*Math.sign(o.x)+t.x*e,m[f+1]=a.y*Math.sign(o.y)+t.y*e,m[f+2]=a.z*Math.sign(o.z)+t.z*e,g[f+0]=t.x,g[f+1]=t.y,g[f+2]=t.z,Math.floor(f/I)){case 0:s.set(1,0,0),c[r+0]=i(s,t,"z","y",e,h),c[r+1]=1-i(s,t,"y","z",e,l);break;case 1:s.set(-1,0,0),c[r+0]=1-i(s,t,"z","y",e,h),c[r+1]=1-i(s,t,"y","z",e,l);break;case 2:s.set(0,1,0),c[r+0]=1-i(s,t,"x","z",e,y),c[r+1]=i(s,t,"z","x",e,h);break;case 3:s.set(0,-1,0),c[r+0]=1-i(s,t,"x","z",e,y),c[r+1]=1-i(s,t,"z","x",e,h);break;case 4:s.set(0,0,1),c[r+0]=1-i(s,t,"x","y",e,y),c[r+1]=1-i(s,t,"y","x",e,l);break;case 5:s.set(0,0,-1),c[r+0]=i(s,t,"x","y",e,y),c[r+1]=1-i(s,t,"y","x",e,l);break}}}const E=new G(1,8,8,0,Math.PI*2,0,Math.PI/2),S=new V(14,20,2,20,1),w=new P({roughness:.2,metalness:1,side:2}),k=new P({roughness:.2,metalness:1,color:5543160});function L({position:p,rotation:y,scale:l,startAnimation:h=0,onClick:n}){const[e,u]=j.useState(!1),o=U(14,{config:{mass:1,friction:15,tension:350,clamp:!0}}),t=j.useRef();return j.useEffect(()=>{t.current.rotation.y-=h},[]),A((a,m)=>{t.current.rotation.y-=m*.5}),x.jsxs(x.Fragment,{children:[x.jsx("group",{position:p,rotation:y,scale:l,children:x.jsxs("group",{ref:t,children:[x.jsx("mesh",{geometry:S,material:w}),x.jsx(v.mesh,{geometry:S,material:k,position:o.to(a=>[a,0,0]),scale:[.85,.4,.5]}),x.jsx(v.mesh,{geometry:S,material:k,position:o.to(a=>[-a,0,0]),scale:[.85,.4,.5]}),x.jsx(v.mesh,{geometry:E,material:w,position:o.to(a=>[0,-a-2,0]),scale:[6,6,6]})]})}),n&&x.jsxs("mesh",{position:p,scale:l*22.5,onPointerOver:()=>{u(!0),o.start(20)},onPointerOut:()=>{u(!1),o.start(14)},onClick:()=>{o.start(35).then(()=>o.start(14)).then(()=>n())},children:[x.jsx("sphereGeometry",{args:[1,32,32]}),x.jsx("meshStandardMaterial",{color:"white",transparent:!0,opacity:e?0:.1})]})]})}export{L as default};
